<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="Shift_JIS" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第II部〜知っていると便利な秀丸の機能　アウトライン解析の枠</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      .smallcaps{font-variant: small-caps;}
      .line-block{white-space: pre-line;}
      .column{display: inline-block;}
  </style>
  <link rel="stylesheet" href="base.css">
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="hmindex0.html"><img src="hide_by2.png" alt="Hidemaru Q and A" width="88" height="32" /></a></p>
<h1 id="TOP">第II部〜知っていると便利な秀丸の機能<br>　アウトライン解析の枠</h1>
<hr />
<h2 id="OUTLINE">●アウトライン解析の枠</h2>
<p>秀丸エディタ Ver.6.00以降では、「アウトライン解析の枠」が使用できます。</p>
<p>文書の構造をツリー状に表示したり、分類ごとにまとめたりして表示できます。 また、関数一覧や、強調表示一覧表示も可能です。</p>
<p>「アウトライン解析の枠」を表示するにはメニューの「表示」から「アウトライン解析の枠」に チェックを入れます。</p>
<ul>
<li><a href="#EXPLANATION">解説</a>
<ul>
<li><a href="#EXPLANATION-1">とりあえず使ってみよう</a></li>
<li><a href="#EXPLANATION-2">設定を変更してみよう</a>
<ul>
<li><a href="#EXPLANATION-2-1">見出しの定義</a></li>
<li><a href="#EXPLANATION-2-2">オプションの説明</a></li>
<li><a href="#EXPLANATION-2-3">ツリー表示の分類について</a></li>
<li><a href="#EXPLANATION-2-4">ツリーの操作</a></li>
</ul></li>
<li><a href="#EXPLANATION-3">アウトラインに関連する機能</a>
<ul>
<li><a href="#EXPLANATION-3-1">見出し</a></li>
<li><a href="#EXPLANATION-3-2">折りたたみ</a></li>
<li><a href="#EXPLANATION-3-3">部分編集</a></li>
</ul></li>
</ul></li>
</ul>
<!-- h3 -->
<div class="marginleft">
<h3 id="EXPLANATION">[解説]</h3>
<p>「アウトライン解析の枠」に各種項目を表示するには、設定が必要です。</p>
<ul>
<li>「ツリー表示」の「通常」や「分類」では、ツリーのレベルや、分類を設定します。</li>
<li><p>「強調表示一覧」では、ファイルタイプ別で設定する強調表示の設定を使用します。</p>
<p><img src="2_outline_001.png" alt="アウトライン解析の方法-強調表示一覧" width="322" height="237" /><br />
</p></li>
<li><p>「関数一覧」では、秀丸エディタがファイルを解析し、関数の一覧を自動的に表示します。 現状では「言語」の内容は、「C言語/Java等」のみしか選ぶことができません。 「C言語/Java等」の場合、以下の言語に対応しています。</p>
<ul>
<li>C</li>
<li>C++</li>
<li>Java</li>
<li>JavaScript</li>
<li>C#</li>
<li>Objective-C</li>
<li>go言語</li>
</ul></li>
</ul>
<!-- h4 -->
<div class="marginleft">
<h4 id="EXPLANATION-1">とりあえず使ってみよう</h4>
<p>「アウトライン解析の枠」にどの様に表示されるかを見るため、デフォルトで内蔵されている設定を使ってみます。</p>
<p>メニューの「その他」-「ファイルタイプ別の設定」でダイアログを表示させ、 「設定の対象」-「アウトライン」-「解析」を選択し、「アウトライン解析の方法」を「ツリー表示-通常」を選択します。</p>
<p><img src="2_outline_002.png" alt="アウトライン解析の方法-ツリー表示-通常" width="773" height="565" /><br />
</p>
<p>「リセット」を押すと表示されるメニューから、「<strong>“.”の数で階層を表す用</strong>」を選ぶと、 「ツリー表示の定義」が以下のように設定されます。</p>
<p><img src="2_outline_003.png" alt="アウトライン解析の方法-“.”の数で階層を表す用" width="355" height="185" /><br />
</p>
<p><strong>一時的な設定にするため</strong><span class="attention_red">「保存しないで更新」</span>を押して、「ファイルタイプ別の設定」を閉じ、 以下の内容をコピーして、設定した秀丸エディタに貼り付けます。</p>
<div class="macro">
<pre><code>.レベル1-1
表題-１
..レベル2-1
章-1
...レベル3-1
節-1
....レベル4-1
項-1
.....レベル5-1
段落-1
......レベル6-1
その他-1

.レベル1-2
表題-2
..レベル2-2
章-2
...レベル3-2
節-2
....レベル4-2
項-2
.....レベル5-2
段落-2
......レベル6-2
その他-2</code></pre>
</div>
<p>設定内容に従い「アウトライン解析の枠」にツリー状の構成が表示されます。</p>
<p><img src="2_outline_004.png" alt="アウトライン解析の方法-ツリー表示" width="450" height="356" /><br />
</p>
<p>簡単ですが、「アウトライン解析の枠」の「ツリー表示」の例になります。 「アウトライン解析の枠」の各項目をクリックすると、その行にカーソルが移動したり、 各項目内をすべて範囲選択する等、操作が可能になります。(例は1行なのであまり意味は無いですが・・・。)</p>
<p>アウトライン解析のツリー設定を行うと、<strong>「折りたたみ」、「見出し」、「部分編集」</strong>も可能になりますが、 別途説明があるので、「<a href="#EXPLANATION-3">アウトラインに関連する機能</a>」を参照の事。</p>
<h4 id="EXPLANATION-2">設定を変更してみよう</h4>
<p>「ツリー表示の定義」の設定について、解説します。</p>
<p>まず、「ツリー表示の定義」の「レベル1」を選択し「プロパティ」を押して、設定画面を表示させます。</p>
<p><img src="2_outline_005.png" alt="アウトライン解析の方法-“.”の数で階層を表す用" width="465" height="114" /><br />
</p>
<p>初期状態は、「オプション」が閉じられた状態で表示されますが、「オプション」ボタンを押す事で、 オプション設定部分の表示/非表示を切り替える事が出来ます。</p>
<p><img src="2_outline_006.png" alt="アウトライン解析の方法-プロパティ画面小" width="447" height="345" /><br />
</p>
<p><img src="2_outline_007.png" alt="アウトライン解析の方法-矢印" width="254" height="110" /><br />
</p>
<p><img src="2_outline_008.png" alt="アウトライン解析の方法-プロパティ画面大" width="692" height="345" /><br />
</p>
<!-- h5 -->
<div class="marginleft">
<h5 id="EXPLANATION-2-1">見出しの定義</h5>
<div class="mark_dt">
<p>ここの「見出しの定義」とオプションの「表示範囲」でツリーに表示される内容が決まります。</p>
<dl>
<dt>「行頭の文字列」</dt>
<dd><p>行頭にある指定された文字列を見出しとして解釈します。</p>
<p>文字列内の“n”は、数値として解釈されます。</p>
<pre><code>(n)   --&gt; (1)、(10)、(100)
第n章 --&gt; 第1章、第10章、第100章
n.n   --&gt; 1.2、2.1、3.4</code></pre>
</dd>
<dt>「行頭の記号」</dt>
<dd><p>設定した文字集合のいずれかを見出しとして解釈します。</p>
<pre><code>#%&amp;   --&gt; &quot;#&quot; or &quot;%&quot; or &quot;&amp;&quot; のいずれかの文字を見出しと認識する</code></pre>
<p>レベルの操作を行った場合は、先頭の文字を使います。</p>
</dd>
<dt>「文字列」</dt>
<dd><p>設定した文字列を見出しとして解釈します。以下のオプションが選択可能です。</p>
<ul>
<li>大文字/小文字の区別</li>
<li>単語の検索</li>
<li>正規表現</li>
</ul>
<p><img src="2_outline_009.png" alt="見出し-文字列" width="367" height="103" /><br />
</p>
<p>正規表現をONした場合、分類モード時のグループ名に正規表現タグを指定できます。 「<a href="#EXPLANATION-2-3">ツリー表示の分類について</a>」を参照してください。</p>
</dd>
<dt>「関数」</dt>
<dd>関数を見出しとして解釈します。 対応する言語は、関数一覧と同じになります。
</dd>
<dt>「強調表示」</dt>
<dd><p>強調表示されている行を見出しとして解釈します。</p>
<p><img src="2_outline_010.png" alt="見出し-強調表示" width="317" height="173" /><br />
</p>
</dd>
</dl>
</div>
<h5 id="EXPLANATION-2-2">オプションの説明</h5>
<div class="mark_dt">
<dl>
<dt>「インデント禁止」</dt>
<dd><p>「行頭の文字列」と「行頭の記号」のみに設定可能な項目。 見出しに設定した文字列/記号の前に、タブ文字や、空白文字を認めるかどうかです。</p>
<ul>
<li><p>例)OFFの場合は、「レベル1-3」を見出しと認識する。(ONの場合は認識しない。)</p>
<p><img src="2_outline_011.png" alt="インデント禁止" width="442" height="102" /><br />
</p></li>
</ul>
</dd>
<dt>「インデントの深さでレベルを決める」</dt>
<dd><p>前の見出しとの比べて、インデントが深ければ１つ下のレベルになります。</p>
<p>「ツリー表示の定義」の「レベルの見せ方」が「<strong>絶対的</strong>」になっていると、<span class="attention_red">この指定は無効</span>です。</p>
<p>実際に設定してみます。「追加」ボタンを押して、現状の設定に以下の内容を追加します。</p>
<p><img src="2_outline_012.png" alt="インデントの深さでレベルを決める設定" width="692" height="345" /><br />
</p>
<p><strong>一時的な設定にするため</strong><span class="attention_red">「保存しないで更新」</span>を押して、閉じます。</p>
<p>「レベル2-1」に以下の内容を追加します</p>
<div class="macro">
<pre><code>- aaaa
  * bbbb</code></pre>
</div>
<p><img src="2_outline_013.png" alt="インデントの深さでレベルを決める設定例1" width="440" height="205" /><br />
</p>
<p>「レベルの見せ方」が「<strong>絶対的</strong>」になっている為、<strong>レベル7の見出し</strong>として認識されます。 ここで設定を「<strong>絶対的</strong>」から「<strong>相対的</strong>」に変更します。</p>
<p>「ツリー表示の定義」画面にある「ツリーの動作」をクリックすると、設定画面が開きます。</p>
<p><img src="2_outline_014.png" alt="レベルの見せ方を開く" width="242" height="291" /><br />
</p>
<p>ここで、レベルの見せ方を、「相対的」に変更します。</p>
<p><img src="2_outline_015.png" alt="ツリーの動作設定画面" width="371" height="218" /><br />
</p>
<p><strong>一時的な設定にするため</strong><span class="attention_red">「保存しないで更新」</span>を押して、閉じます。</p>
<p><img src="2_outline_016.png" alt="インデントの深さでレベルを決める設定例2" width="440" height="218" /><br />
</p>
<p>「絶対的」な場合と表示状態が変化しましたが、これは直ぐ上の見出しとレベルの比較を行い、 レベルが低ければ「下位レベル」と判断している(レベル7とは認識しない)からです。 さらに、“bbbb” は、“aaaa” より、インデントが深くなっている為、さらに下位と判断されます。</p>
<p>やっと、オプションの説明になります。</p>
<p>ONの場合認識</p>
<div class="macro">
<pre><code>├レベル2-1
│└aaaa      レベル2より低いレベルなので1段下げ
│  └bbbb    インデントの深さより、&quot;aaaa&quot; より低いレベルなので1段下げ</code></pre>
</div>
<p>OFFの場合認識</p>
<div class="macro">
<pre><code>├レベル2-1
│├aaaa      レベル2より低いレベルなので1段下げ
│└bbbb      インデントの深さは関係ないので、&quot;aaaa&quot; と同じレベル</code></pre>
</div>
<p>このチェックがONの場合、インデントだけで、レベルを決める事が出来ます。</p>
</dd>
<dt>「一つ上のツリー定義と同じレベルとして定義」</dt>
<dd><p>「追加」していくと、上のレベルから順番に定義されていきます。 「インデントの深さでレベルを決める」の説明で追加した項目は、「<strong>レベル7</strong>」になっています。</p>
<p><img src="2_outline_017.png" alt="ツリーの表示画面1" width="356" height="179" /><br />
</p>
<p>このオプションを「<strong>ON</strong>」にすると、「一つ上のツリー定義と同じレベル」になります。 この場合は、「<strong>レベル6</strong>」。“LV”の項目が空白なのは、一つ上と同じという意味。</p>
<p><img src="2_outline_018.png" alt="ツリーの表示画面2" width="356" height="179" /><br />
</p>
<p>通常は、「<strong>一つのレベルに対し定義は1個</strong>」という状態ですが、このチェックをONにする事で、 「<strong>一つのレベルに対し定義を複数個</strong>」設定する事が出来ます。</p>
</dd>
<dt>「コメントを無視」</dt>
<dd>「ファイルタイプ別の設定」-「デザイン」で、「コメント」と認識している箇所を、 見出しと認識させたくない場合は、「ON」にしてください。
</dd>
<dt>「文字定数を無視」</dt>
<dd>「ファイルタイプ別の設定」-「デザイン」で、「文字定数」と認識している箇所を、 見出しと認識させたくない場合は、「ON」にしてください。
</dd>
<dt>「展開/折りたたみ状態」</dt>
<dd><p>ツリー表示の状態を設定します</p>
<ul>
<li>標準<br />
子があるときは初期状態で展開し、手動で折り畳みも可能。</li>
<li>初期状態でツリーを折りたたみ<br />
最初に表示する場合は、ツリーを折りたんだ状態にする。</li>
<li>展開したままで固定<br />
子があるときに[+]/[-]マークなどは表示せずに、常に展開された状態。</li>
</ul>
</dd>
<dt>「表示範囲」</dt>
<dd><p>見出しを表示する範囲を決めます。</p>
<p>以下の場合に適用されます。</p>
<ul>
<li>「アウトライン解析の枠」</li>
<li>「アウトライン解析…」のダイアログ</li>
<li>「見出しバー」</li>
</ul>
<p>以下の選択ができます。</p>
<ul>
<li>自動</li>
<li><p>ヒットした文字以降<br />
<img src="2_outline_019.png" alt="ヒットした文字以降" width="190" height="103" /><br />
</p></li>
<li><p>ヒットした文字より後<br />
<img src="2_outline_020.png" alt="ヒットした文字より後" width="190" height="103" /><br />
</p></li>
<li><p>ヒットした文字のみ<br />
<img src="2_outline_021.png" alt="ヒットした文字のみ" width="190" height="103" /><br />
</p></li>
<li>行全体<br />
(この例では「ヒットした文字以降」と同じ)</li>
<li><p>次の行全体<br />
<img src="2_outline_022.png" alt="次の行全体" width="190" height="103" /><br />
</p></li>
</ul>
<p>ツリーに表示する内容を、任意の部分だけにしたい場合は、「見出しの定義」を「文字列」にして、正規表現を使います。 後読み(先頭にある記号の指定等)と先読み(表示したくない後方部分を指定)を使うか、ヒットした扱いにするタグ指定を使います。 そして、「表示範囲」を「ヒットした文字のみ」にすれば、任意部分のみ表示可能になります。</p>
</dd>
<dt>「自動的な選択/部分編集の対象」</dt>
<dd><p>ONの場合、以下の状態に影響があります。</p>
<ul>
<li>「部分編集」コマンドを実行したとき、自動的に部分編集となる範囲の境界となる見出しかどうか</li>
<li>「折りたたみ用の余白」で大きな[+]/[-]マークとして表示され、折りたたみの対象となるかどうか</li>
<li>「次の見出し」「前の見出し」コマンドでジャンプする対象となるかどうか</li>
</ul>
</dd>
<dt><span id="option-9">「見出しバーに表示する対象」</span></dt>
<dd>OFFにすると、見出しバーに表示しないようになります。
</dd>
<dt>「行番号表示」</dt>
<dd>見出しに行番号も表示する/しないの設定です。
</dd>
</dl>
</div>
<h5 id="EXPLANATION-2-3">ツリー表示の分類について</h5>
<p>「分類モード時のグループ名」を入力しておくと、「ツリー表示-分類」が使用できます。</p>
<p><img src="2_outline_023.png" alt="分類について" width="319" height="225" /><br />
</p>
<p>現状の設定にグループ名を追加してみます。</p>
<p><img src="2_outline_024.png" alt="分類について" width="355" height="229" /><br />
</p>
<p>「ツリー表示-分類」に変更すると、表示が以下のように、設定したグループ名毎になります。</p>
<p><img src="2_outline_025.png" alt="分類時の表示" width="189" height="333" /><br />
</p>
<p>「見出しの定義」で「文字列」を選択し、「正規表現」を有効にした場合、 グループ名に正規表現にマッチしたタグを指定する事が出来ます。</p>
<p><img src="2_outline_047.png" alt="分類時の表示-正規表現タグの指定" width="434" height="167" /><br />
</p>
<h5 id="EXPLANATION-2-4">ツリーの操作</h5>
<p>「アウトライン解析の枠」で、見出しの項目を選択すると、右クリックメニューでツリーの単位の操作が可能です。</p>
<p><img src="2_outline_039.png" alt="ツリーの右クリックメニュー1" width="304" height="262" /><br />
</p>
<p>例えば「切り抜き」ですが、選択した見出し下にあるツリーも対象になります。</p>
実行前
<div class="macro">
<pre><code>├レベル1-1
│└レベル2-1         
│  └レベル3-1  &lt;----ここを選択し、「切り抜き」を実行すると下のツリーも対象になる。
│    └レベル4-1     
│      └レベル5-1   
│        └レベル6-1 
├レベル1-2</code></pre>
</div>
「切り抜き」実行後
<div class="macro">
<pre><code>├レベル1-1
│└レベル2-1
├レベル1-2</code></pre>
</div>
<p>「コピー」や「範囲選択」も同様に、ツリー構造になっている場合は、選択以下のツリーも対象になります。</p>
<p>「上に挿入」/「下に挿入」は、選択した見出しの上か下に、指定したレベルの見出しを追加可能です。</p>
<p><img src="2_outline_040.png" alt="ツリーの右クリックメニュー2" width="445" height="294" /><br />
</p>
<p>「ツリー操作」では、見出しのレベル上げたり、下げたりも可能です。 「ツリーそのものをコピー」では「アウトライン解析の枠」の内容をクリップボードにコピーします。 ツリーの場合は罫線(?)ではなく、レベルの数だけTABコード(0x09)が入ります。</p>
<p><img src="2_outline_041.png" alt="ツリーの右クリックメニュー3" width="578" height="332" /><br />
</p>
</div>
<h4 id="EXPLANATION-3">アウトラインに関連する機能</h4>
<p>アウトライン解析に関連する機能として以下の機能があります</p>
<ul>
<li><a href="#EXPLANATION-3-1">見出し</a></li>
<li><a href="#EXPLANATION-3-2">折りたたみ</a></li>
<li><a href="#EXPLANATION-3-3">部分編集</a></li>
</ul>
<p>標準では非表示になっていて、表示するには以下の “&gt;&gt;” を押す事で表示可能です。</p>
<p><img src="2_outline_026.png" alt="各種表示切替1" width="450" height="248" /><br />
</p>
<p>もう一度 “&gt;&gt;” を押す事で非表示になります。</p>
<p><img src="2_outline_027.png" alt="各種表示切替2" width="524" height="223" /><br />
</p>
<!-- h5 -->
<div class="marginleft">
<h5 id="EXPLANATION-3-1">見出しバー</h5>
<p>カーソルが今どこにあるかを表示します。設定により表示しない事も可能です。 (<a href="#option-9">「見出しバーに表示する対象」</a>)</p>
<p><img src="2_outline_028.png" alt="見出しの表示" width="591" height="262" /><br />
</p>
<p>見出しバーの矢印を押す事で、見出しの移動が可能です。</p>
<p><img src="2_outline_029.png" alt="見出しの移動" width="420" height="115" /><br />
</p>
<h5 id="EXPLANATION-3-2">折りたたみ</h5>
<p>エディタ上の本文を、見出し単位で折りたたむ事が出来ます。 折りたたみ可能な箇所は、<img src="2_outline_030.png" alt="折りたたみのマーク1" width="12" height="12" /> で示されます。</p>
<p><img src="2_outline_031.png" alt="折りたたみ前" width="418" height="454" /><br />
</p>
<p>「レベル3-3」で折りたたむと、それ以下のレベルまで折りたたまれます。 <img src="2_outline_032.png" alt="折りたたみのマーク1" width="12" height="12" /> をクリックすると展開されます。</p>
<p><img src="2_outline_033.png" alt="折りたたみ後" width="414" height="332" /><br />
</p>
<p>アウトラインの見出しだけではなく、<span class="attention_red">選択範囲を折りたたむ</span>事も可能です。 「見出し」ではないので、マーカーが異なります。</p>
<p><img src="2_outline_034.png" alt="範囲選択の折りたたみ前" width="417" height="338" /><br />
</p>
<p>範囲選択すると範囲を示すマーカーが出るので、クリックすると折りたたまれます。</p>
<p><img src="2_outline_035.png" alt="範囲選択の折りたたみ前" width="417" height="203" /><br />
</p>
<ul>
<li><p>折りたたみの設定</p>
<p>折りたたみに関する設定は、「<strong>ファイルタイプ別の設定</strong>」-「アウトライン」-「<strong>折りたたみ</strong>」で変更が可能です。</p>
<p><img src="2_outline_045.png" alt="折りたたみの設定" width="460" height="248" /><br />
</p>
<p>「折りたたみ可能な条件」にある「折りたたみ可能な条件の設定」を押すと詳細設定も可能です。</p>
<p><img src="2_outline_046.png" alt="折りたたみ可能な条件" width="420" height="473" /><br />
</p></li>
</ul>
<h5 id="EXPLANATION-3-3">部分編集</h5>
<p>エディタ上の本文を、見出し単位で部分編集状態にする事が出来ます。 部分編集になると、グレーアウトされた箇所は編集できません。 <strong>検索や置換も、部分編集内に限定</strong>されます。</p>
<p>部分編集可能な箇所は、<img src="2_outline_030.png" alt="折りたたみのマーク1" width="12" height="12" /> で示され、 範囲は点線で示されます。</p>
<p><img src="2_outline_036.png" alt="部分編集前" width="417" height="331" /><br />
</p>
<p>「レベル3-1」にカーソルがある状態で、見出しバーにある <img src="2_outline_037.png" alt="部分編集のチェック" width="15" height="15" /> をクリックすると 部分編集モードになります。</p>
<p><img src="2_outline_038.png" alt="部分編集後" width="418" height="334" /><br />
</p>
<p>折りたたみと同様に、<span class="attention_red">選択範囲を部分編集にする</span>事も可能です。</p>
<ul>
<li><p>部分編集対象外部分の表示方法</p>
<p>デフォルト状態では、部分編集の対象外部分はグレーアウトしますが、 表示方法は「<strong>ファイルタイプ別の設定</strong>」-「アウトライン」-「部分編集」-「<strong>部分編集の表示</strong>」で変更が可能です。</p>
<p><img src="2_outline_042.png" alt="部分編集後" width="411" height="205" /><br />
</p>
<div class="mark_dt">
<dl>
<dt>制限モード</dt>
<dd><p>デフォルトは「制限モード」になっていて、グレーアウトします。 「半透明」にチェックを入れると、グレーアウトするかわりに半透明になりますが、 白背景だとわかりにくいので、黒背景に変えてみます。<br />
画面配色の関係で、グレーアウトでは見にくい場合は半透明を使う方法もあります。</p>
<p><img src="2_outline_043.png" alt="グレーアウトと半透明" width="574" height="345" /><br />
</p>
</dd>
<dt>ローカル編集モード</dt>
<dd><p>ローカル編集モードは、部分編集部分のみ表示され、あたかも別の文章のように表示されます。 (行番号も先頭が1から表示される)</p>
<p><img src="2_outline_044.png" alt="ローカル編集モード" width="417" height="227" /><br />
</p>
</dd>
</dl>
</div></li>
</ul>
</div>
</div>
</div>
<hr />
<p><a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
