<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="Shift_JIS">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>第II部〜知っていると便利な秀丸の機能　置換</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="base.css">
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>

<p><a href="hmindex0.html"><img src="hide_by2.png" alt="Hidemaru Q and A" width="88" height="32" /></a></p>
<h1 id="TOP">第II部〜知っていると便利な秀丸の機能<br />
　置換</h1>
<hr />
<h2 id="REPLACE">●置換</h2>
<p>編集中のファイルにいっぱいある、特定の文字(列)を別の文字(列)に置き換えたい時には、秀丸エディタの「<strong>置換</strong>」機能を使えば簡単にできます。<br />
(「<strong>置換</strong>」とは、</p>
<ol type="1">
<li>置換したい文字列を<strong>検索</strong>する</li>
<li>見つかった文字列を指定した文字列に<strong>置き換える</strong></li>
</ol>
<p>という二つの作業を一度に行う事です。)</p>
<ul>
<li><a href="#EXPLANATION">[解説]</a></li>
<li><a href="#SUPPLEMENTATION">[補足]</a>
<ul>
<li><a href="#SUPPLEMENTATION-1">[置換確認のダイアログ]</a></li>
<li><a href="#SUPPLEMENTATION-2">[置換に関する設定]</a></li>
<li><a href="#SUPPLEMENTATION-3">[変換モジュールを使った置換]</a></li>
<li><a href="#SUPPLEMENTATION-4">ヒストリーに常駐</a></li>
<li><a href="#SUPPLEMENTATION-5">検索/置換文字数の上限</a></li>
</ul></li>
</ul>
<!-- h3 -->
<div class="marginleft">
<h3 id="EXPLANATION">[解説]</h3>
<p>編集中のファイルにある「<strong>over</strong>」という文字列を「<strong>upper</strong>」という文字列に置き換えたいとします。</p>
<ol type="1">
<li>秀丸エディタの「<strong>検索</strong>」メニューから(もしくはツールバーやファンクションキーで)「<strong>置換</strong>」を選択して、以下の様に入力します。
<ul>
<li>「<strong><span class="font_blue">検索</span></strong>」のエディットボックスに「<strong>over</strong>」と入力する</li>
<li>「<strong><span class="font_blue">置換</span></strong>」のエディットボックスに「<strong>upper</strong>」と入力する</li>
</ul>
<p><img src="2_replace_01.png" alt="置換ダイアログ" width="433" height="272" /><br />
</p></li>
<li>次に適宜オプションを指定するわけですが、各オプションの意味は以下の通りです。
<ul>
<li><p><strong>「<span class="font_blue">大文字／小文字の区別</span>」チェックボックス：</strong><br />
検索文字列の大文字と小文字を区別して検索します。 この項目がＯＦＦの場合、上の例で「<strong>OVER</strong>」や「<strong>Over</strong>」も置換対象になります。</p></li>
<li><p><strong>「<span class="font_blue">単語の検索</span>」チェックボックス：</strong><br />
この項目がＯＮになっていると、「<strong>Lovers</strong>」や「<strong>fover</strong>」等の、ある語の一部になっている場合は置換対象になりません。</p></li>
<li><p><strong>「<span class="font_blue">正規表現</span>」チェックボックス：</strong><br />
検索文字列に「<strong>正規表現</strong>」が使える様になります。この項目をＯＮにすると、上記二つのオプション指定は無効になります。<br />
「<strong>正規表現</strong>」については「<a href="4_regular.html">●正規表現について</a>」を参照して下さい。</p></li>
<li><p><strong>「<span class="font_blue">あいまい検索</span>」チェックボックス：</strong><br />
「正規表現」をさらに便利にした「<strong>あいまい</strong>」な検索が可能になります(全半角同一視、等)。<br />
「<strong>あいまい検索</strong>」については「<a href="2_fuzzy.html">●あいまい検索について</a>」を参照して下さい。</p></li>
<li><p><strong>「<span class="font_blue">選択した範囲内のみ</span>」チェックボックス：</strong><br />
置換の範囲があらかじめ「<strong>範囲選択</strong>」された部分に限定されます。<br />
※このオプションの動作の詳細については、<a href="HME0083A.html"><strong>[HME0083A]</strong> ●検索／置換の「選択した範囲内のみ」の動作</a> を参照してください。</p></li>
<li><p><strong>「<span class="font_blue">次の秀丸エディタも続けて置換</span>」チェックボックス</strong><br />
現在編集中の秀丸エディタウィンドウの他にも秀丸エディタが開いていた場合、その秀丸エディタウィンドウの内容に対しても置換を実行します。</p></li>
<li><p><strong>「<span class="font_blue">一周する</span>」チェックボックス</strong><br />
一番下まで検索し終わった場合、先頭に戻って検索します。上検索の場合は逆になります。</p></li>
<li><p><strong>「<span class="font_blue">追加の条件</span>」チェックボックス</strong><br />
追加の条件に従って検索する範囲を制限できます。<br />
<a href="2_find.html">検索</a>の<a href="2_find.html#SUPPLEMENTATION-1">「追加の条件」について</a>を参照してください。</p></li>
<li><p><strong>「<span class="font_blue">検索文字列を強調</span>」チェックボックス</strong><br />
検索を実行後、検索に該当する文字列を強調表示します。</p></li>
<li><p><strong>「<span class="font_blue">置換の前に確認</span>」チェックボックス</strong><br />
確認ダイアログを表示し、置換する前に本当に置換するかどうかの確認をします。<br />
置換の確認ダイアログは「その他→動作環境→検索→検索ダイアログ」の「置換の確認の種類」で、種類を変更できます。</p></li>
</ul></li>
<li>最後に実行方法を選択する事で「<strong>置換</strong>」が行われます。
<ul>
<li>「<strong><span class="font_blue">上検索</span></strong>」(現在のカーソル位置より上にある文字を置換)</li>
<li>「<strong><span class="font_blue">下検索</span></strong>」(現在のカーソル位置より下にある文字を置換)</li>
<li>「<strong><span class="font_blue">全置換</span></strong>」(編集中のファイルの全ての文字を置換)</li>
</ul>
<p>のいずれかを選んで下さい。</p></li>
</ol>
<h3 id="SUPPLEMENTATION">[補足]</h3>
<ul>
<li><p>検索部分は、<a href="2_find.html">検索</a>の「<a href="2_find.html#SUPPLEMENTATION-2">検索文字列の取り込みについて</a>」と同じ事が可能です。</p></li>
<li><p>「検索」、「置換」部分は、複数行に対応しています。 「検索」、「置換入力部の横にある<span class="rotate90">▲</span>マークのメニューから「複数行」を選択してください。</p>
<p><img src="2_replace_02.png" alt="置換ダイアログ-複数選択" width="433" height="412" /><br />
</p>
<p>「検索」で表示されるメニューは<a href="2_find.html#SUPPLEMENTATION-4">検索ダイアログ</a> と同じです。<br />
「置換」で表示されるメニューは以下になります。<br />
<img src="2_replace_08.png" alt="置換メニュー" width="407" height="288" /><br />
</p></li>
<li><p>「置換」ダイアログのタイトルバー部分にある「▼」マークを押すと、メニューが表示されます。 「<strong>検索文字列の追加取得</strong>」、「<strong>検索の動作環境</strong>」を開いたり、「<strong>検索ダイアログ</strong>」に切り替える事も可能です。</p>
<img src="2_replace_03.png" alt="置換ダイアログのメニューその２" width="433" height="412" /><br />
</li>
</ul>
<!-- h4 -->
<div class="marginleft">
<h4 id="SUPPLEMENTATION-1">[置換確認のダイアログ]</h4>
<p>「<span class="font_blue">置換の前に確認</span>」にチェックを入れた場合、確認用ダイアログが表示されます。 このダイアログは複数あり、設定により切り替え可能です。</p>
<p>従来のダイアログ<br />
<img src="2_replace_04.png" alt="確認ダイアログ従来タイプ" width="453" height="59" /><br />
</p>
<p>新しいダイアログ(タイプ2)<br />
<img src="2_replace_05.png" alt="確認ダイアログタイプ2" width="453" height="59" /><br />
</p>
<p>新しいダイアログ(タイプ3)<br />
<img src="2_replace_06.png" alt="確認ダイアログタイプ3" width="348" height="59" /><br />
</p>
<p>以前だと、「<span class="font_blue">一周する</span>」がオフの状態で、上検索または下検索を行い、 ファイルの上限か下限に達して、検索出来なくなると確認ダイアログが消えましたが、 現状では「キャンセル」しないと表示されたままになります。 (移動できない方向の検索ボタンは無効化された状態になる。)</p>
<p>従来のダイアログでの表示例<br />
<img src="2_replace_07.png" alt="確認ダイアログ従来タイプその2" width="453" height="59" /><br />
これは、例えば「下検索」実行時に、ファイル末尾まで検索した場合、そのまま「上検索」を実行可能にする為です。 以前のように、マッチしなくなった場合、ダイアログを消すよう変更する事も可能です。</p>
<h4 id="SUPPLEMENTATION-2">[置換に関する設定]</h4>
<p>各機能に関しては、「ヘルプ」を参照の事。</p>
<p><img src="2_replace_setting01.png" alt="動作環境-検索" width="605" height="433" /><br />
「置換の動作」で「置換の確認の種類」で置換確認のダイアログを選択可能です。</p>
<p><img src="2_replace_setting02.png" alt="動作環境-検索-検索ダイアログ" width="605" height="433" /><br />
「置換ダイアログボックス」の「置換の確認の種類」でも置換確認のダイアログを選択可能です。</p>
<h4 id="SUPPLEMENTATION-3">[変換モジュールを使った置換]</h4>
<p>秀丸エディタ Ver.8.13より、置換時、検索結果に対し、変換モジュールの機能を実行できるようになりました。</p>
<p>これで何ができるかというと、検索でマッチした箇所を、大文字/小文字/全角/半角へ変換する事が可能になります。 (検索でマッチした箇所に、変換モジュールが持つ各種変換を実行する事ができる。)</p>
<p>この機能を使用する場合は、<strong>「<span class="font_blue">正規表現</span>」</strong> を有効にする必要があります。</p>
<p>標準添付されている変換モジュールの機能は以下になります。</p>
<div class="table_border">
<table>
<caption>標準添付の変換モジュール</caption>
<thead>
<tr class="header">
<th style="text-align: left;">関数名</th>
<th style="text-align: left;">機能</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ToUpper</td>
<td style="text-align: left;">UPPER CASE(大文字へ)</td>
</tr>
<tr class="even">
<td style="text-align: left;">ToLower</td>
<td style="text-align: left;">lower case(小文字へ)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ToHankaku</td>
<td style="text-align: left;">ハンカク</td>
</tr>
<tr class="even">
<td style="text-align: left;">ToZenkakuHira</td>
<td style="text-align: left;">全角ひらがな</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ToZenkakuKata</td>
<td style="text-align: left;">全角カタカナ</td>
</tr>
<tr class="even">
<td style="text-align: left;">ToSpace</td>
<td style="text-align: left;">TAB -&gt; 空白</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ToTab</td>
<td style="text-align: left;">空白 -&gt; TAB</td>
</tr>
<tr class="even">
<td style="text-align: left;">ToHankakuAlnum</td>
<td style="text-align: left;">英数字/記号/空白のみ半角に</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ToZenkakuAlnum</td>
<td style="text-align: left;">英数字/記号/空白のみ全角に</td>
</tr>
<tr class="even">
<td style="text-align: left;">ToHankakuKataOnly</td>
<td style="text-align: left;">カタカナのみ半角に</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ToZenkakuKataOnly</td>
<td style="text-align: left;">カタカナのみ全角に</td>
</tr>
<tr class="even">
<td style="text-align: left;">Indent</td>
<td style="text-align: left;">インデント</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UnIndent</td>
<td style="text-align: left;">逆インデント</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sort</td>
<td style="text-align: left;">ソート</td>
</tr>
</tbody>
</table>
</div>
<p>置換のエディットボックスに以下のフォーマットで記入すること。</p>
<div class="box_line">
<pre><code>\(タグ番号, 関数名, 変換モジュール名)</code></pre>
<dl>
<dt>タグ番号</dt>
<dd>0 はマッチした全体 1〜15 は、タグ付き正規表現でしていしたタグの番号
</dd>
<dt>関数名</dt>
<dd>使用したい機能を指定する。
</dd>
<dt>変換モジュール名</dt>
<dd><p>標準添付の変換モジュールは省略可能。 標準添付以外の変換モジュールを使う場合は指定する必要がある。</p>
<p>秀丸エディタ本体と同じ場所に変換モジュールがある場合<strong>以外</strong>は、フルパスで指定する事。</p>
</dd>
</dl>
</div>
<dl>
<dt>例)hidemaru と editor を大文字に変換したい場合</dt>
<dd><p>通常の置換で行う場合は、</p>
<pre><code>置換一回目
検索：hidemaru
置換：HIDEMARU

置換二回目
検索：editor
置換：EDITOR</code></pre>
<p>のように2回の置換を行う必要があるが、変換モジュールの機能を使えば一回の置換で可能。</p>
<pre><code>検索：(hidemaru|editor)
置換：\(0,ToUpper)

実行前：hidemaru editor
実行後：HIDEMARU EDITOR</code></pre>
<p>変換モジュールの機能を組み合わせることも可能で、大文字に変換して、さらに全角へ変換という事もできます。</p>
<pre><code>検索：(hidemaru|editor)
置換：\((0,ToUpper),ToZenkakuAlnum)

実行前：hidemaru editor
実行後：ＨＩＤＥＭＡＲＵ ＥＤＩＴＯＲ</code></pre>
</dd>
</dl>
<p>詳細はヘルプ<span class="externallink"><a href="http://hidemaruo.mydns.jp:81/helpsite/hidemaru/html/190_CmdSearch_Regular_Replace_Filter.html" target="_blank">置換の時の、変換モジュールによる変換の指定</a></span> を参照してください。</p>
<h4 id="SUPPLEMENTATION-4">ヒストリーに常駐</h4>
<p>「検索」は検索と共通ですが、「置換」は単独で設定可能です。</p>
<p>「<strong>ヒストリーに常駐</strong>」の設定方法は、<a href="2_find.html">「検索」</a>の<a href="2_find.html#SUPPLEMENTATION-6">「ヒストリーに常駐」</a>を参照してください。</p>
<h4 id="SUPPLEMENTATION-5">検索/置換文字数の上限</h4>
<p><strong><span class="font_blue">複数行の「検索」と「置換」</span></strong>エディットボックスに入力し、 検索/置換に指定できる文字列には上限があり、約4000文字が上限となります。</p>
<p>上限を超えると、<span class="attention_red">警告が表示</span>されます。</p>
<p><img src="2_replace_09.png" alt="置換ダイアログの警告" width="433" height="95" /><br />
</p>
<!-- h4 -->
</div>
<!-- h3 -->
</div>
<hr />
<p><a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
