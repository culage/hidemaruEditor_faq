<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="Shift_JIS" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第II部〜知っていると便利な秀丸の機能　強調表示</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="base.css" />
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="hmindex0.html"><img src="hide_by2.png" alt="Hidemaru Q and A" width="88" height="32" /></a></p>
<h1 id="TOP">第II部〜知っていると便利な秀丸の機能<br>　強調表示</h1>
<hr />
<h2 id="highlight">●強調表示</h2>
<p>秀丸エディタでは、「<strong>強調表示</strong>」が可能です。</p>
<p>「<strong>強調表示</strong>」とは、文書中にある指定された<span class="attention_red">文字列(キーワード)</span>を、指定した文字色にしたり、修飾を行ったりする機能です。 対象が含まれる行全体を強調する事も可能です。</p>
<p>ユーザーで設定可能な強調表示には、文字列(キーワード)用の強調表示が12種類。</p>
<ul>
<li>強調表示1〜8</li>
<li>特に強調表示1〜4</li>
</ul>
<p>行単位で強調する「行の強調表示」が4種類。</p>
<ul>
<li>行の強調表示1〜4</li>
</ul>
<p>全部で、16種類の強調表示が可能です。</p>
<ul>
<li><a href="#PROCESS">設定手順</a>
<ul>
<li><a href="#PROCESS-1">強調表示の種類</a></li>
<li><a href="#PROCESS-2">強調表示の設定</a>
<ul>
<li><a href="#PROCESS-2-1">自動判定と言語指定の場合</a></li>
<li><a href="#PROCESS-2-2">ユーザー定義</a></li>
<li><a href="#PROCESS-2-3">「強調表示定義ファイル」を使う</a></li>
</ul></li>
</ul></li>
<li><a href="#SUPPLEMENTATION">補足</a>
<ul>
<li><a href="#SUPPLEMENTATION-1">強調表示がうまくいかない場合の注意点</a></li>
<li><a href="#SUPPLEMENTATION-2">秀丸エディタに内蔵されている強調表示設定を取り出す</a></li>
<li><a href="#SUPPLEMENTATION-3">任意の色やスタイルで強調表示を行いたい</a></li>
</ul></li>
</ul>
<!-- h3 -->
<div class="marginleft">
<h3 id="PROCESS">設定手順</h3>
<p>強調表示を設定するには、以下の操作が必要です。</p>
<ul>
<li><p>「<span class="filetype">ファイルタイプ別の設定</span>」→「デザイン」の「場所の一覧」で、 各強調表示のプロパティから、文字色、背景色、スタイルを設定する。</p>
<p><img src="2_highlight_01.png" alt="デザイン、場所の一覧" width="604" height="321" /><br />
</p></li>
<li><p>「<span class="filetype">ファイルタイプ別の設定</span>」→「デザイン」→「強調表示」で、 強調表示する内容を設定する。</p>
<p><img src="2_highlight_02.png" alt="デザイン、強調表示" width="608" height="226" /><br />
</p></li>
</ul>
<p>「強調表示したい文字列」を、<span class="attention_red">任意の文字色、背景色、スタイルに設定する事は出来ません</span>。<br />
「強調表示したい文字列」を、「場所の一覧」で設定した、どの<span class="attention_red">「強調表示」に割り当てるかを選ぶ</span> 事になります。</p>
<!-- h4 -->
<div class="marginleft">
<h4 id="PROCESS-1">強調表示の種類</h4>
<p>強調表示には、文字列(キーワード)用の強調表示が12種類あります。</p>
<ul>
<li>強調表示1〜8</li>
<li>特に強調表示1〜4</li>
</ul>
<p>行単位で強調する「行の強調表示」が4種類あります。</p>
<ul>
<li>行の強調表示1〜4</li>
</ul>
<p>「場所の一覧」から各強調表示を選択し、プロパティで</p>
<ul>
<li>文字色</li>
<li>背景色</li>
<li>スタイル</li>
</ul>
<p>の設定を行います。</p>
<p>強調表示には優先順位があり、優先が<span class="attention_red">高い方</span>から</p>
<ol type="1">
<li>特に強調表示</li>
<li>行の強調表示</li>
<li>強調表示</li>
</ol>
<p>になります。</p>
<ul>
<li>優先度が高い　→　強調する箇所が重複した場合、表示が上になる。</li>
</ul>
<p>同じ項目内(例えば、強調表示1〜8)で競合した場合は、どの強調表示が優先されるかは不定とのこと。</p>
<h4 id="PROCESS-2">強調表示の設定</h4>
<p>強調表示したい文字列(キーワード)の設定方法は、以下になります。</p>
<ul>
<li><p><a href="#PROCESS-2-1">自動判定</a></p>
<p>秀丸エディタが拡張子から言語を判定して、強調表示を行います。 秀丸エディタに内蔵されている強調表示設定を使用するため、強調表示する内容を変更する事は出来ません。</p></li>
<li><p><a href="#PROCESS-2-1">言語指定</a></p>
<p>言語を指定して、強調表示を行います。 秀丸エディタに内蔵されている強調表示設定を使用するため、強調表示する内容を変更する事は出来ません。</p></li>
<li><p><a href="#PROCESS-2-2">ユーザー定義</a></p>
<p>強調表示する内容をユーザーで設定します。</p></li>
<li><p>なし</p>
<p>強調表示を行わない。</p></li>
<li><p><a href="#PROCESS-2-3">「強調表示定義ファイル」を使う</a></p>
<p><a href="https://hide.maruo.co.jp/lib/hilight/index.html" class="externallink" target="_blank">秀丸エディタの強調表示定義ファイルライブラリ</a>にある「強調表示定義ファイル」や、 webサイトで公開されている「強調表示定義ファイル」を使用します。</p></li>
</ul>
<!-- h5 -->
<div class="marginleft">
<h5 id="PROCESS-2-1">自動判定と言語指定の場合</h5>
<p>自動判定や言語指定でサポートしている言語は、以下になります。</p>
<ul>
<li>HTML/XML</li>
<li>CSS</li>
<li>C言語/Java/JavaScript</li>
<li>VisualBasic</li>
<li>Pascal/Delphi</li>
<li>アセンブリ語</li>
<li>Perl</li>
<li>Ruby</li>
<li>Python</li>
<li>VHDL</li>
<li>Verilog</li>
<li>AutoLISP</li>
<li>TeX</li>
<li>PL/SQL</li>
<li>秀丸マクロ</li>
<li>秀Termスクリプト</li>
<li>FORTRAN77</li>
<li>FORTRAN90</li>
<li>UNIXシェルスクリプト</li>
<li>Hidemarnet Explorer</li>
</ul>
<p>自動判定の場合は、ファイルの拡張子から自動的に判定されます。 言語指定を行う場合は、リストから言語を選択してください。</p>
<p>自動判定/言語指定 の場合、秀丸エディタに内蔵されている強調表示設定を使用するため、強調表示する内容を変更する事は出来ません。 「デザイン」で、各強調表示の色/スタイルの変更は可能です。</p>
<p>また、各言語の最新バージョンの内容が反映されている保証はありません。</p>
<p>各言語の最新バージョンや、標準でサポートしていない言語の場合、 <a href="https://hide.maruo.co.jp/lib/hilight/index.html" class="externallink" target="_blank">秀丸エディタの強調表示定義ファイルライブラリ</a> で、その言語用の強調表示定義ファイルが公開されていないか探してみてください。</p>
<h5 id="PROCESS-2-2">ユーザー定義</h5>
<p>ユーザー定義を選択すると、右側にある各種ボタンが有効になり、強調表示一覧が表示されます。</p>
<p><img src="2_highlight_03.png" alt="強調表示-ユーザー定義" width="458" height="236" /><br />
</p>
<dl>
<dt>プロパティ</dt>
<dd>選択した強調表示設定を変更します。
</dd>
<dt>追加</dt>
<dd>新規に強調表示設定を追加します。
</dd>
<dt>削除</dt>
<dd>選択した強調表示設定を削除します。
</dd>
<dt>全削除</dt>
<dd>設定されている全ての強調表示設定を削除します。
</dd>
<dt>保存</dt>
<dd>現在の内容を強調表示定義ファイルに保存します。
</dd>
</dl>
<p><span class="btn-push">「追加」</span>ボタンを押すと、「強調表示文字列の追加」ダイアログが表示されます。</p>
<p><img src="2_highlight_04.png" alt="強調表示文字列の追加" width="385" height="242" /><br />
</p>
<dl>
<dt>文字列</dt>
<dd>検索する文字列を入力します。<br />
入力文字数には制限があります。Ver.8.21以下までは半角文字で約249文字まで、Ver.8.22からは999文字まで。
</dd>
<dt>検索方法</dt>
<dd><p>通常の検索と同じで、検索条件を設定します。以下の条件を設定可能です。</p>
<ul>
<li>大文字小文字の区別</li>
<li>単語の検索</li>
<li>正規表現<br />
改行文字を示す <code>\n</code> を含めることは出来ません。</li>
</ul>
</dd>
<dt>表示方法</dt>
<dd><p>検索にマッチした箇所に対し、どの強調表示を適用させるか選択します。<br />
完全ではありませんが、ドロップダウンリストに、「デザイン」で設定した色やスタイルで表示されます。</p>
<p><img src="2_highlight_05.png" alt="表示方法の選択" width="343" height="298" /><br />
</p>
</dd>
</dl>
<h5 id="PROCESS-2-3">「強調表示定義ファイル」を使う</h5>
<dl>
<dt><span class="attention_red">注意</span></dt>
<dd>「強調表示定義ファイル」を読み込む場合、事前に設定してある内容は全て破棄されます。 現状の内容に追加されるのではなく、「強調表示定義ファイル」の内容と入れ替わることになります。 元の内容を保存しておきたい場合は、事前に<span class="btn-push">「保存」</span>ボタンを使用し、ファイルに保存しておいてください。
</dd>
</dl>
<p>ダウンロードした「強調表示定義ファイル」を「設定ファイル用のフォルダ」に入れておくと、多少手間が省けます。 (ZIP形式で圧縮されている場合は、解凍して、hilightファイルを「設定ファイル用のフォルダ」に入れてください)</p>
<p><span class="btn-push">「読込み」</span>ボタンを押すと、「強調表示などの読込ダイアログ」が表示されます。</p>
<p><img src="2_highlight_06.png" alt="強調表示定義ファイルの読み込み" width="448" height="396" /><br />
</p>
<p>デフォルトでは、「<span class="env">動作環境</span>」にある「設定ファイル用のフォルダ」で設定されているフォルダ内の「強調表示定義ファイル」が 一覧に表示されます。 他のフォルダにある「強調表示定義ファイル」を読み込む場合は、<span class="btn-push">「参照」</span>ボタンからファイルを選択してください。。</p>
<p>「強調表示定義ファイル」を選ぶと、読み込む対象部分に、ファイルに含まれている項目が、チェックされたり、有効になります。 (強調表示から呼び出したので、強調表示のチェックはデフォルトでON状態になります)</p>
<p>一覧に表示されているファイルを選択し、<span class="btn-push">「OK」</span>ボタンを押すか、ファイル一覧のダブルクリックで、選択した内容が読み込まれます。 「強調表示定義ファイル」を読み込んだ場合は、強調表示の設定は「ユーザー定義」になります。</p>
<!-- h5 -->
</div>
<!-- h4 -->
</div>
<h3 id="SUPPLEMENTATION">補足</h3>
<!-- h4 -->
<div class="marginleft">
<h4 id="SUPPLEMENTATION-1">強調表示がうまくいかない場合の注意点</h4>
<p>優先度が低い「強調表示1〜8」の場合、秀丸エディタが行っている、「デザイン」-「場所の一覧」の強調表示以外の条件にマッチしてしまい、 思ったように強調されない場合があります。</p>
<p>これは「場所の一覧」内の優先度の問題なので、対処としては以下になります。</p>
<ul>
<li>「強調表示1〜8」ではなく、「特に強調表示」を使う</li>
<li>競合している設定が、ON/OFF出来る場合、OFFにして問題なければOFFにする</li>
<li>諦める</li>
</ul>
<p>「デザイン」 - 「場所の一覧」の優先順位は、以下の順になります。 (スクロールバーでスクロール出来ます。)</p>
<!-- hme0016c_01 -->
<div class="hme0016c_01">
<p><img src="2_highlight_07.png" alt="場所の一覧" width="271" height="560" /><br />
</p>
<!-- hme0016c_01 -->
</div>
<h4 id="SUPPLEMENTATION-2">秀丸エディタに内蔵されている強調表示設定を取り出す</h4>
<p>秀丸エディタに内蔵されている強調表示設定を少し変更したい場合の方法です。</p>
<ol type="1">
<li><p>新規ファイルを開き、「<span class="filetype">ファイルタイプ別の設定</span>」-「デザイン」-「強調表示」で、 「言語指定」を選択し、取り出したい言語を選択します。(例は秀丸マクロ)</p>
<p><img src="2_highlight_08.png" alt="言語指定を選択" width="441" height="258" /><br />
</p></li>
<li><span class="btn-push">「保存しないで更新」</span>ボタンを押し、「<span class="filetype">ファイルタイプ別の設定</span>」を一度閉じます。</li>
<li><p>再度、「<span class="filetype">ファイルタイプ別の設定</span>」を開き、「デザイン」-「強調表示」で、「ユーザー定義」を選択します。 そうすると、言語指定で設定されていた内容が、そのまま強調表示一覧に表示されます。</p>
<p><img src="2_highlight_09.png" alt="ユーザー定義を選択" width="473" height="204" /><br />
</p></li>
<li><span class="btn-push">「保存」</span>ボタンで「強調表示定義ファイル」として保存できます。</li>
<li><p>設定したい拡張子のファイルを開き、「強調表示定義ファイル」を読み込めば、編集が可能です。</p></li>
</ol>
<h4 id="SUPPLEMENTATION-3">任意の色やスタイルで強調表示を行いたい</h4>
<p>秀丸エディタの「強調表示」の機能を使う場合は無理です。「場所の一覧」で設定した強調表示の中から選ぶ必要があります。</p>
<p>カラーマーカーと自動起動マクロを使えば、ある程度、強調表示と同じようなことは可能です。 ただし、結構大変です。</p>
<p>マクロには、「すべての候補を色付け」コマンド相当の「<code>colormarkerallfound</code>文」があります。 この命令と、自動起動マクロの「ファイルを開いた直後」、「編集後タイマー」を使えば、 検索にマッチした箇所を、(カラーマーカーで設定できる範囲ですが)任意の色やスタイルにする事が出来ます。</p>
<!-- h5 -->
<div class="marginleft">
<h5 id="SUPPLEMENTATION-3-1">特定箇所にカラーマーカーで色付けするマクロの例</h5>
<p>「編集後タイマー」に、以下のマクロを指定します。(ある程度、時間経過させた方が良いでしょう。)</p>
<p>編集していた行に「ファイルタイプ別の設定」という文字があれば、カラーマーカーで色付けします。 範囲選択しているのは、対象ファイルのサイズが大きいと時間がかかる可能性があるので、その対策です。</p>
<p>実際には、外部にデータファイルを持たせたり、もう少し着色する範囲を広くした方が良いかもしれません。</p>
<div class="macro">
<pre><code>//検索条件を保持
setcompatiblemode 0x120000;
//各種座標を保存
#x = x; #y = y;
#topy = screentopy;
//画面更新停止
disabledraw;
//1行選択(編集していた行を選択)
selectline;
//「選択した範囲のみ」で動作するように設定。
forceinselect 1;
//検索内容設定
setsearch &quot;ファイルタイプ別の設定&quot;, 0;
//検索して色付け
colormarkerallfound 0x0000ff,-1, 3, 2, 0, &quot;&quot;;
//念のため範囲選択を解除し、カーソルを動かす
escape;right;
//座標を元に戻し、画面更新
moveto #x, #y;
enabledraw #topy;</code></pre>
<!-- macro -->
</div>
<!-- h5 -->
</div>
<!-- h4 -->
</div>
<!-- h3 -->
</div>
<hr />
<p><a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
